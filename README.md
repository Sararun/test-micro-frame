# PHP Micro-Framework

–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π PHP —Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–º Dependency Injection –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–û –ø—Ä–æ–µ–∫—Ç–µ](#–æ-–ø—Ä–æ–µ–∫—Ç–µ)
- [–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª](#—Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π-—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
- [–ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç](#–±—ã—Å—Ç—Ä—ã–π-—Å—Ç–∞—Ä—Ç)
- [–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã](#–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è-–∏-–∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã)
- [–ö–∞–∫ –ø–æ–¥–Ω—è—Ç—å](#–∫–∞–∫-–ø–æ–¥–Ω—è—Ç—å)

---

## –û –ø—Ä–æ–µ–∫—Ç–µ

–ú–∏–∫—Ä–æ-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫ —Å–æ–∑–¥–∞–Ω —Å –Ω—É–ª—è –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ (–∫—Ä–æ–º–µ PSR-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∏ –¥–µ–±–∞–≥–µ—Ä–∞ –æ—Ç Symfony) –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è.

### –¶–µ–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞

–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Ç–æ—Ç–∏–ø –º–∏–∫—Ä–æ—Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º:
- DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- –†–æ—É—Ç–∏–Ω–≥
- Middleware
- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

---

## –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

### ‚úÖ Dependency Injection Container

**–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** —á–µ—Ä–µ–∑ Reflection API
- **–ü—Ä–∏–≤—è–∑–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –∫ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è–º** (Interface binding)
- **Singleton –ø–æ–¥–¥–µ—Ä–∂–∫–∞** –¥–ª—è –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤
- **Contextual binding** - —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤
- **–û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
- **Method injection** - –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤ –º–µ—Ç–æ–¥—ã
- **PSR-11 —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```php
use Src\DI\Container;

$container = new Container();

// –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–∏–≤—è–∑–∫–∞
$container->bind(LoggerInterface::class, FileLogger::class);

// Singleton
$container->singleton(DatabaseConnection::class);

// –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è –ø—Ä–∏–≤—è–∑–∫–∞
$container->when(PaymentService::class)
    ->needs(LoggerInterface::class)
    ->give(PaymentLogger::class);
```

### ‚úÖ Compiled Container (–≥–∏–±—Ä–∏–¥–Ω—ã–π –ø–æ–¥—Ö–æ–¥)

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –≤–¥–æ—Ö–Ω–æ–≤–ª–µ–Ω–Ω–∞—è Symfony:

- **Compile-time –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PHP-–∫–æ–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

```php
// –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
$containerCompiler = new ContainerCompiler($container);
$containerCompiler->compile(
    outputFile: $this->cacheDir . '/CachedContainer.php',
    namespace: 'App\\cache\\compiled',
);

// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
$compiledContainer = require '/path/to/compiled/CompiledContainer.php';
```

### ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–æ—É—Ç–∏–Ω–≥–∞

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**

- HTTP –º–µ—Ç–æ–¥—ã: GET, POST, PUT, DELETE, PATCH
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL: `/users/{id}`
- Middleware support
- Request/Response handling

**–ü—Ä–∏–º–µ—Ä—ã:**

```php
// Controller method
$router->post('/users', [UserController::class, 'store']);

// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
$router->get('/users/{id}', [UserController::class, 'show']);
```

### ‚úÖ Console –∫–æ–º–∞–Ω–¥—ã

–°–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –¥–ª—è CLI –æ–ø–µ—Ä–∞—Ü–∏–π.

**–ó–∞–ø—É—Å–∫ –∫–æ–º–∞–Ω–¥—ã:**

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
php artisan.php cache:clear

# –° boolean —Ñ–ª–∞–≥–æ–º
php artisan.php cache:clear --compiled

# –ö–æ—Ä–æ—Ç–∫–∞—è –Ω–æ—Ç–∞—Ü–∏—è
php artisan.php cache:clear -compiled

# –° –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
php artisan.php cache:clear --compiled=hello
```

**–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã:**

```php
class ClearCacheCommand extends Command
{
    protected string $signature = 'cache:clear {--compiled} {--routes} {--consoleRoutes} {--all}';
    protected string $description = 'Clear application cache';
    
    public function handle(ConsoleInput $input, ConsoleOutput $output): int
    {
        $this->output->writeln('Running clear cache...');
    }
}
```

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ö–∞–∫ –Ω–∞—á–∞—Ç—å

1. –í —Ñ–∞–π–ª–µ `app/modules_declaration.php` —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–π –º–æ–¥—É–ª—å
2. –í –ø—Ä–æ–µ–∫—Ç–µ —É–∂–µ –µ—Å—Ç—å –ø—Ä–∏–º–µ—Ä –º–æ–¥—É–ª—è
3. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–≤–æ–µ–≥–æ –º–æ–¥—É–ª—è - —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã

---

## –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –∫–æ–º–ø—Ä–æ–º–∏—Å—Å—ã

### ‚ö†Ô∏è –ß—Ç–æ –ø—Ä–∏—à–ª–æ—Å—å —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∏–∑-–∑–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

#### 1. **–†–æ—É—Ç–∏–Ω–≥**

**–ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ì—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤ (route groups)
- –ì–ª–æ–±–∞–ª—å–Ω—ã–µ middleware
- Middleware –Ω–∞ –≥—Ä—É–ø–ø—ã –º–∞—Ä—à—Ä—É—Ç–æ–≤

#### 2. **DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä**

**–ü—Ä–æ–±–ª–µ–º—ã:**
- DI –Ω–µ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∑–∞–º—ã–∫–∞–Ω–∏—è–º–∏ (Closure)
- –ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–µ–π: DI –≤—ã–∑—ã–≤–∞–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –∫–æ–º–∞–Ω–¥—ã –Ω–∞–ø—Ä—è–º—É—é (–Ω–µ —É—Å–ø–µ–ª –ø–µ—Ä–µ–¥–µ–ª–∞—Ç—å)

#### 3. **–ö–æ–º–ø–∏–ª—è—Ü–∏—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**

**–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è:**
- –í –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–π DI –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤—ã–∑–æ–≤—ã —Å–µ—Ä–≤–∏—Å–æ–≤ (–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –∫–æ–º–∞–Ω–¥—ã)
- –ö—ç—à–∏—Ä–æ–≤–∞—Ç—å –Ω—É–∂–Ω–æ –ª–∏–±–æ –≤—Å—ë, –ª–∏–±–æ –Ω–∏—á–µ–≥–æ
- –ù–µ —É—Å–ø–µ–ª —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –∫—ç—à–µ–º (—Ç–æ–ª—å–∫–æ –±–∞–∑–æ–≤–∞—è –æ—á–∏—Å—Ç–∫–∞)

#### 4. **–¢–∏–ø–∏–∑–∞—Ü–∏—è**

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏:**
- –¢–∏–ø–∏–∑–∞—Ü–∏—è –Ω–µ –≤–µ–∑–¥–µ –Ω–∞ –¥–æ–ª–∂–Ω–æ–º —É—Ä–æ–≤–Ω–µ
- –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–µ—Å—Ç–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–∏—à–∫–æ–º —à–∏—Ä–æ–∫–∏–µ —Ç–∏–ø—ã

---
## –ö–∞–∫ –ø–æ–¥–Ω—è—Ç—å
 - cp .env.example .env
 - –≤ /etc/hosts –∑–∞–∫–∏–Ω—É—Ç—å 127.0.0.1 test.local
 - docker-compose up -d --build
 - –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ composer install
---
## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

---

**–°–æ–∑–¥–∞–Ω–æ –≤ —Ä–∞–º–∫–∞—Ö —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è**